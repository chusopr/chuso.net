---
title: "Luchando contra el recordador de contraseñas del Firefox"
date: 2010-01-01T08:15:06+00:00
slug: luchando-contra-el-recordador-de-contrasenas-del-firefox
categories: [web-development]
tags: [hack,mozilla-firefox,password-reminder,javascript]
---
<p>La situación es la siguiente: una página web en la que tras acceder con un nombre de usuario y una contraseña se puede dar de alta a nuevos usuarios y un usuario que usa Mozilla Firefox con la opción de recordar contraseñas.</p>

<p>El caso: el usuario crea una nueva cuenta o bien accede con una cuenta y luego edita esa misma cuenta desde otra cuenta</p>

<p>El problema: Al crear la nueva cuenta el Firefox le rellenará los campos con el nombre y contraseña de la cuenta actual. Al editar la cuenta el Firefox le rellenará los campos con el nombre y contraseña que se están editando que también están en el recordador de contraseñas, si el usuario no edita con la intención de cambiar la contraseña no se fija en que sólo el primero de los dos campos "Contraseña" y "Repetir contraseña" tiene contenido por lo que al darle a guardar le dará el error de "Las dos contraseñas no coinciden".</p>

<p>La solución:</p>

<ul>
<li>
<p>Primer intento: cambiar el nombre del campo de contraseña en el formulario de edición y creación de usuarios para que no coincida con el nombre del formulario de login:</p>

<p>Acceso:</p>

<pre style="font-family: monospace;">
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"user"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Username:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"pass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"pass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"pass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"password"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
</pre>

<p>Añadir/editar usuario:</p>
<pre style="font-family: monospace;">
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"edituser"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Username:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"edituser"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"edituser"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"editpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"editpass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"editpass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"password"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"editpass2"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Repeat Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"editpass2"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"editpass2"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"password"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
</pre>

<p>Problema: mismo resultado, el nombre del campo no era el motivo por el que el Firefox sólo rellenaba el primer password y no el segundo, parece que sólo busca el primer campo tipo password que encuentre.</p>
</li>

<li>
<p>Segundo intento: ocultar los campos de contraseña y en su lugar mostrar la opción de cambiar las contraseñas que al seleccionarla despliegue los campos de contraseña.</p>

<pre style="font-family: monospace;">
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>script</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text/javascript;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #4B35FF;'>&lt;!--</span>
  <span style='color: #008B8B;'>function</span> <span style='color: #695ACD;'>show_pass</span>()
  <span style='color: #008B8B;'>{</span>
    <span style='color: #AA2C2C; font-weight: bold;'>document</span><span style='color: #695ACD;'>.getElementById</span>(<span style='color: #FF00FF;'>'tr_chpass'</span>)<span style='color: #695ACD;'>.style.display = </span><span style='color: #FF00FF;'>'none'</span><span style='color: #695ACD;'>;</span>
    <span style='color: #AA2C2C; font-weight: bold;'>document</span><span style='color: #695ACD;'>.getElementById</span>(<span style='color: #FF00FF;'>'tr_pass'</span>)<span style='color: #695ACD;'>.style.display = </span><span style='color: #FF00FF;'>'table-row'</span><span style='color: #695ACD;'>;</span>
    <span style='color: #AA2C2C; font-weight: bold;'>document</span><span style='color: #695ACD;'>.getElementById</span>(<span style='color: #FF00FF;'>'tr_pass2'</span>)<span style='color: #695ACD;'>.style.display = </span><span style='color: #FF00FF;'>'table-row'</span><span style='color: #695ACD;'>;</span>
  <span style='color: #008B8B;'>}</span>
<span style='color: #4B35FF;'>//--&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>script</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>

<span style='color: #4B35FF;'>&lt;!-- ... --&gt;</span>

<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"user"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Username:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"tr_chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>span</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"chpass"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">style</span>=</span><span style='color: #FF00FF;'>"cursor: pointer; color: blue; border-bottom: 1px dotted blue;"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">onclick</span>=</span><span style='color: #695ACD;'>"show_pass</span>()<span style='color: #695ACD;'>;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
      Change password<span style='color: #61ADA3; font-weight: bold;'>&lt;/</span><span style='color: #AA2C2C; font-weight: bold;'>span</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">style</span>=</span><span style='color: #FF00FF;'>"display: none;"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"tr_pass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"pass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"pass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"pass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"password"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">style</span>=</span><span style='color: #FF00FF;'>"display: none;"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"tr_pass2"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"pass2"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Repeat password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"pass2"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"pass2"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"password"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
</pre>

<p>Problema: mismo comportamiento</p>
</li>

<li>
<p>Tercer intento: no incluir los inputs de la contraseña en el formulario, generarlos por JavaScript añadiéndolos a la tabla con element.innerHTML</p>

<pre style="font-family: monospace;">
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>script</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text/javascript;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #4B35FF;'>&lt;!--
  <span style='color: #008B8B;'>function</span> show_pass<span style='color: black;'>()</span>
  <span style='color: #008B8B;'>{
    var</span> tr_chpass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.getElementById<span style='color: black;'>(</span><span style='color: #FF00FF;'>"tr_chpass"</span><span style='color: black;'>)</span>;
    tr_chpass.style.display = <span style='color: #FF00FF;'>"none"</span>;
    <span style='color: #008B8B;'>var</span> tr_pass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span><span style='color: #FF00FF;'>'tr'</span><span style='color: black;'>)</span>;
    tr_pass.innerHTML =
        <span style='color: #FF00FF;'>"&lt;td&gt;&lt;label for='pass'&gt;Password:&lt;\/label&gt;&lt;\/td&gt;"</span> +
        <span style='color: #FF00FF;'>"&lt;td&gt;&lt;input type='password' name='pass' id='pass'&gt;&lt;\/td&gt;"</span>;
    <span style='color: #008B8B;'>var</span> tr_pass2 = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span><span style='color: #FF00FF;'>'tr'</span><span style='color: black;'>)</span>;
    tr_pass2.innerHTML =
        <span style='color: #FF00FF;'>"&lt;td&gt;&lt;label for='pass2'&gt;Repeat Password:&lt;\/label&gt;&lt;\/td&gt;"</span> +
        <span style='color: #FF00FF;'>"&lt;td&gt;&lt;input type='password' name='pass2' id='pass2'&gt;&lt;\/td&gt;"</span>;
    <span style='color: #008B8B;'>var</span> parent_table = tr_chpass.parentNode;
    parent_table.insertBefore<span style='color: black;'>(</span>tr_pass, tr_chpass<span style='color: black;'>)</span>;
    parent_table.insertBefore<span style='color: black;'>(</span>tr_pass2, tr_chpass<span style='color: black;'>)</span>;
  <span style='color: #008B8B;'>}</span>
//--&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>script</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>

<span style='color: #4B35FF;'>&lt;!-- ... --&gt;</span>

<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"user"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Username:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"tr_chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>span</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"chpass"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">style</span>=</span><span style='color: #FF00FF;'>"cursor: pointer; color: blue; border-bottom: 1px dotted blue;"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">onclick</span>=</span><span style='color: #695ACD;'>"show_pass</span>()<span style='color: #695ACD;'>;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
      Change password<span style='color: #61ADA3; font-weight: bold;'>&lt;/</span><span style='color: #AA2C2C; font-weight: bold;'>span</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
</pre>

<p>Problema: parece que Firefox no renderiza correctamente las tablas generadas con innerHTML ya que el resultado es el siguiente:</p>
<table style="border: none;">
  <tr>
    <td><label for="user">Username:</label></td>
    <td><input name="user" id="user" type="text"></td>
  </tr>
  <tr>
    <td><label for="userpass">Password:</label><input name="userpass" id="userpass" type="password"></td>
    <td></td>
  </tr>
  <tr>
    <td><label for="userpass2">Repeat Password:</label><input name="userpass2" id="userpass2" type="password"></td>
    <td></td>
  </tr>
</table>
</li>

<li>
<p>Cuarto y último intento: no incluir los inputs de la contraseña en el formulario, generarlos por JavaScript añadiéndolos a la tabla con element.insertBefore()</p>

<pre style="font-family: monospace;">
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>script</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text/javascript;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #4B35FF;'>&lt;!--
  <span style='color: #008B8B;'>function</span> show_pass()
  <span style='color: #008B8B;'>{</span>
    <span style='color: #AA2C2C; font-weight: bold;'>document</span>.getElementById<span style='color: black;'>(</span><span style='color: #FF00FF;'>"tr_chpass"</span><span style='color: black;'>)</span>.style.display = <span style='color: #FF00FF;'>"none"</span>;
    <span style='color: #008B8B;'>var</span> tr_pass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span><span style='color: #FF00FF;'>'tr'</span><span style='color: black;'>)</span>;
    <span style='color: #008B8B;'>var</span> tr_pass2 = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span><span style='color: #FF00FF;'>'tr'</span><span style='color: black;'>)</span>;
    <span style='color: #008B8B;'>var</span> td_label_pass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span><span style='color: #FF00FF;'>'td'</span><span style='color: black;'>)</span>;
    td_label_pass.innerHTML = <span style='color: #FF00FF;'>"&lt;label for='pass'&gt;Password:&lt;\/label&gt;"</span>;
    <span style='color: #008B8B;'>var</span> td_input_pass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span>'td'<span style='color: black;'>)</span>;
    td_input_pass.innerHTML = <span style='color: #FF00FF;'>"&lt;input type='password' name='pass' id='pass'&gt;"</span>;
    <span style='color: #008B8B;'>var</span> td_label_pass2 = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span>'td'<span style='color: black;'>)</span>;
    td_label_pass2.innerHTML = <span style='color: #FF00FF;'>"&lt;label for='pass2'&gt;Repeat Password:&lt;\/label&gt;"</span>;
    <span style='color: #008B8B;'>var</span> td_label_pass2 = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span>'td'<span style='color: black;'>)</span>;
    tr2td2.innerHTML = <span style='color: #FF00FF;'>"&lt;input type='password' name='pass2' id='pass2'&gt;"</span>;
    tr_pass.insertBefore<span style='color: black;'>(</span>td_label_pass, <span style='color: #AA2C2C; font-weight: bold;'>null</span><span style='color: black;'>)</span>;
    tr_pass.insertBefore<span style='color: black;'>(</span>td_input_pass, <span style='color: #AA2C2C; font-weight: bold;'>null</span><span style='color: black;'>)</span>;
    tr_pass2.insertBefore<span style='color: black;'>(</span>td_label_pass2, <span style='color: #AA2C2C; font-weight: bold;'>null</span><span style='color: black;'>)</span>;
    tr_pass2.insertBefore<span style='color: black;'>(</span>td_input_pass2, <span style='color: #AA2C2C; font-weight: bold;'>null</span><span style='color: black;'>)</span>;
    <span style='color: #008B8B;'>var</span> tr_chpass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.getElementById<span style='color: black;'>(</span><span style='color: #FF00FF;'>"chpass_row"</span><span style='color: black;'>)</span>;
    <span style='color: #008B8B;'>var</span> parent_table = tr_chpass.parentNode;
    parent_table.insertBefore<span style='color: black;'>(</span>tr_pass, tr_chpass<span style='color: black;'>)</span>;
    parent_table.insertBefore<span style='color: black;'>(</span>tr_pass2, tr_chpass<span style='color: black;'>)</span>;
  <span style='color: #008B8B;'>}</span>
//--&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>script</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>

<span style='color: #4B35FF;'>&lt;!-- ... --&gt;</span>

<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"user"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Username:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"tr_chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>span</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"chpass"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">style</span>=</span><span style='color: #FF00FF;'>"cursor: pointer; color: blue; border-bottom: 1px dotted blue;"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">onclick</span>=</span><span style='color: #695ACD;'>"show_pass</span>()<span style='color: #695ACD;'>;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
      Change password<span style='color: #61ADA3; font-weight: bold;'>&lt;/</span><span style='color: #AA2C2C; font-weight: bold;'>span</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
</pre>
</li>
</ul>
