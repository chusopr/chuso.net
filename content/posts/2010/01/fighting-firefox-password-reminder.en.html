---
title: "Fighting Firefox password reminder"
date: 2010-01-01T08:15:06+00:00
slug: fighting-firefox-password-reminder
categories: [web-development]
tags: [hack,mozilla-firefox,password-reminder,javascript]
---
<p>The situation is as follows: a website which, after logging in with a username and a password, allows you to register new users and a Mozilla Firefox user with the option to remember passwords enabled.</p>

<p>The case: the user adds a new account or logs in with an account and then edits this account from another account.<p>

<p>The problem: When the user is adding the new account Firefox will fill the fields with the user and password of the current account. When the user is editing an existing account Firefox will fill the fields with the username and password from the account being edited —which is also in the password reminder— if the user is not editing the account with the intent to change its password will not notice that only the first of the two fields "Password" and "Repeat password" is filled, so when the user tries to save it will display "Passwords don't match" error.</p>

<p>Solution:</p>

<ul>
<li><p>First attempt: rename the password field on the edit form so it doesn't have the same name as the password field in the login form:</p>

<p>Log in:</p>

<pre style="font-family: monospace;">
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"user"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Username:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"pass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"pass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"pass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"password"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
</pre>

<p>Add/edit user:</p>
<pre style="font-family: monospace;">
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"edituser"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Username:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"edituser"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"edituser"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"editpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"editpass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"editpass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"password"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"editpass2"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Repeat Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"editpass2"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"editpass2"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"password"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
</pre>

<p>Problem: same result, the field name is not the reason why Firefox only fills the first password field but not the second one, it seems it only looks for the first password field.</p>
</li>

<li><p>Second attempt: hiding password fields and instead show a link to change the password that, when clicked, shows the password fields.</p>

<pre style="font-family: monospace;">
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>script</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text/javascript;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #4B35FF;'>&lt;!--</span>
  <span style='color: #008B8B;'>function</span> <span style='color: #695ACD;'>show_pass</span>()
  <span style='color: #008B8B;'>{</span>
    <span style='color: #AA2C2C; font-weight: bold;'>document</span><span style='color: #695ACD;'>.getElementById</span>(<span style='color: #FF00FF;'>'tr_chpass'</span>)<span style='color: #695ACD;'>.style.display = </span><span style='color: #FF00FF;'>'none'</span><span style='color: #695ACD;'>;</span>
    <span style='color: #AA2C2C; font-weight: bold;'>document</span><span style='color: #695ACD;'>.getElementById</span>(<span style='color: #FF00FF;'>'tr_pass'</span>)<span style='color: #695ACD;'>.style.display = </span><span style='color: #FF00FF;'>'table-row'</span><span style='color: #695ACD;'>;</span>
    <span style='color: #AA2C2C; font-weight: bold;'>document</span><span style='color: #695ACD;'>.getElementById</span>(<span style='color: #FF00FF;'>'tr_pass2'</span>)<span style='color: #695ACD;'>.style.display = </span><span style='color: #FF00FF;'>'table-row'</span><span style='color: #695ACD;'>;</span>
  <span style='color: #008B8B;'>}</span>
<span style='color: #4B35FF;'>//--&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>script</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>

<span style='color: #4B35FF;'>&lt;!-- ... --&gt;</span>

<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"user"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Username:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"tr_chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>span</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"chpass"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">style</span>=</span><span style='color: #FF00FF;'>"cursor: pointer; color: blue; border-bottom: 1px dotted blue;"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">onclick</span>=</span><span style='color: #695ACD;'>"show_pass</span>()<span style='color: #695ACD;'>;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
      Change password<span style='color: #61ADA3; font-weight: bold;'>&lt;/</span><span style='color: #AA2C2C; font-weight: bold;'>span</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">style</span>=</span><span style='color: #FF00FF;'>"display: none;"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"tr_pass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"pass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"pass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"pass"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"password"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">style</span>=</span><span style='color: #FF00FF;'>"display: none;"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"tr_pass2"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"pass2"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Repeat password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"pass2"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"pass2"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"password"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
</pre>

<p>Problem: same result.</p>
</li>

<li><p>Third attempt: not including the password field in the form, create it with JavaScript adding them with element.innerHTML.</p>

<pre style="font-family: monospace;">
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>script</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text/javascript;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #4B35FF;'>&lt;!--
  <span style='color: #008B8B;'>function</span> show_pass<span style='color: black;'>()</span>
  <span style='color: #008B8B;'>{
    var</span> tr_chpass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.getElementById<span style='color: black;'>(</span><span style='color: #FF00FF;'>"tr_chpass"</span><span style='color: black;'>)</span>;
    tr_chpass.style.display = <span style='color: #FF00FF;'>"none"</span>;
    <span style='color: #008B8B;'>var</span> tr_pass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span><span style='color: #FF00FF;'>'tr'</span><span style='color: black;'>)</span>;
    tr_pass.innerHTML =
        <span style='color: #FF00FF;'>"&lt;td&gt;&lt;label for='pass'&gt;Password:&lt;\/label&gt;&lt;\/td&gt;"</span> +
        <span style='color: #FF00FF;'>"&lt;td&gt;&lt;input type='password' name='pass' id='pass'&gt;&lt;\/td&gt;"</span>;
    <span style='color: #008B8B;'>var</span> tr_pass2 = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span><span style='color: #FF00FF;'>'tr'</span><span style='color: black;'>)</span>;
    tr_pass2.innerHTML =
        <span style='color: #FF00FF;'>"&lt;td&gt;&lt;label for='pass2'&gt;Repeat Password:&lt;\/label&gt;&lt;\/td&gt;"</span> +
        <span style='color: #FF00FF;'>"&lt;td&gt;&lt;input type='password' name='pass2' id='pass2'&gt;&lt;\/td&gt;"</span>;
    <span style='color: #008B8B;'>var</span> parent_table = tr_chpass.parentNode;
    parent_table.insertBefore<span style='color: black;'>(</span>tr_pass, tr_chpass<span style='color: black;'>)</span>;
    parent_table.insertBefore<span style='color: black;'>(</span>tr_pass2, tr_chpass<span style='color: black;'>)</span>;
  <span style='color: #008B8B;'>}</span>
//--&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>script</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>

<span style='color: #4B35FF;'>&lt;!-- ... --&gt;</span>

<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"user"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Username:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"tr_chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>span</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"chpass"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">style</span>=</span><span style='color: #FF00FF;'>"cursor: pointer; color: blue; border-bottom: 1px dotted blue;"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">onclick</span>=</span><span style='color: #695ACD;'>"show_pass</span>()<span style='color: #695ACD;'>;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
      Change password<span style='color: #61ADA3; font-weight: bold;'>&lt;/</span><span style='color: #AA2C2C; font-weight: bold;'>span</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
</pre>

<p>Problem: it seems that Firefox doesn't render correctly tables created with innerHTML since the resulting table seems like this:</p>

<table style="border: none;">
  <tr>
    <td><label for="user">Username:</label></td>
    <td><input name="user" id="user" type="text"></td>
  </tr>
  <tr>
    <td><label for="userpass">Password:</label><input name="userpass" id="userpass" type="password"></td>
    <td></td>
  </tr>
  <tr>
    <td><label for="userpass2">Repeat Password:</label><input name="userpass2" id="userpass2" type="password"></td>
    <td></td>
  </tr>
</table>
</li>

<li>
<p>Fourth and last attempt: not including the password field in the form, create it with JavaScript adding them with element.insertBefore()</p>

<pre style="font-family: monospace;">
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>script</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text/javascript;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #4B35FF;'>&lt;!--
  <span style='color: #008B8B;'>function</span> show_pass()
  <span style='color: #008B8B;'>{</span>
    <span style='color: #AA2C2C; font-weight: bold;'>document</span>.getElementById<span style='color: black;'>(</span><span style='color: #FF00FF;'>"tr_chpass"</span><span style='color: black;'>)</span>.style.display = <span style='color: #FF00FF;'>"none"</span>;
    <span style='color: #008B8B;'>var</span> tr_pass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span><span style='color: #FF00FF;'>'tr'</span><span style='color: black;'>)</span>;
    <span style='color: #008B8B;'>var</span> tr_pass2 = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span><span style='color: #FF00FF;'>'tr'</span><span style='color: black;'>)</span>;
    <span style='color: #008B8B;'>var</span> td_label_pass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span><span style='color: #FF00FF;'>'td'</span><span style='color: black;'>)</span>;
    td_label_pass.innerHTML = <span style='color: #FF00FF;'>"&lt;label for='pass'&gt;Password:&lt;\/label&gt;"</span>;
    <span style='color: #008B8B;'>var</span> td_input_pass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span>'td'<span style='color: black;'>)</span>;
    td_input_pass.innerHTML = <span style='color: #FF00FF;'>"&lt;input type='password' name='pass' id='pass'&gt;"</span>;
    <span style='color: #008B8B;'>var</span> td_label_pass2 = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span>'td'<span style='color: black;'>)</span>;
    td_label_pass2.innerHTML = <span style='color: #FF00FF;'>"&lt;label for='pass2'&gt;Repeat Password:&lt;\/label&gt;"</span>;
    <span style='color: #008B8B;'>var</span> td_label_pass2 = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.createElement<span style='color: black;'>(</span>'td'<span style='color: black;'>)</span>;
    tr2td2.innerHTML = <span style='color: #FF00FF;'>"&lt;input type='password' name='pass2' id='pass2'&gt;"</span>;
    tr_pass.insertBefore<span style='color: black;'>(</span>td_label_pass, <span style='color: #AA2C2C; font-weight: bold;'>null</span><span style='color: black;'>)</span>;
    tr_pass.insertBefore<span style='color: black;'>(</span>td_input_pass, <span style='color: #AA2C2C; font-weight: bold;'>null</span><span style='color: black;'>)</span>;
    tr_pass2.insertBefore<span style='color: black;'>(</span>td_label_pass2, <span style='color: #AA2C2C; font-weight: bold;'>null</span><span style='color: black;'>)</span>;
    tr_pass2.insertBefore<span style='color: black;'>(</span>td_input_pass2, <span style='color: #AA2C2C; font-weight: bold;'>null</span><span style='color: black;'>)</span>;
    <span style='color: #008B8B;'>var</span> tr_chpass = <span style='color: #AA2C2C; font-weight: bold;'>document</span>.getElementById<span style='color: black;'>(</span><span style='color: #FF00FF;'>"chpass_row"</span><span style='color: black;'>)</span>;
    <span style='color: #008B8B;'>var</span> parent_table = tr_chpass.parentNode;
    parent_table.insertBefore<span style='color: black;'>(</span>tr_pass, tr_chpass<span style='color: black;'>)</span>;
    parent_table.insertBefore<span style='color: black;'>(</span>tr_pass2, tr_chpass<span style='color: black;'>)</span>;
  <span style='color: #008B8B;'>}</span>
//--&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>script</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>

<span style='color: #4B35FF;'>&lt;!-- ... --&gt;</span>

<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"user"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Username:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>input</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">name</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"user"</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">type</span>=</span><span style='color: #FF00FF;'>"text"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"tr_chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>label</span> <span style="color: #2D8B56;"><span style="font-weight: bold;">for</span>=</span><span style='color: #FF00FF;'>"chpass"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>Password:<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>label</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span><span style='color: #61ADA3; font-weight: bold;'>&lt;</span><span style='color: #AA2C2C; font-weight: bold;'>span</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">id</span>=</span><span style='color: #FF00FF;'>"chpass"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">style</span>=</span><span style='color: #FF00FF;'>"cursor: pointer; color: blue; border-bottom: 1px dotted blue;"</span>
      <span style="color: #2D8B56;"><span style="font-weight: bold;">onclick</span>=</span><span style='color: #695ACD;'>"show_pass</span>()<span style='color: #695ACD;'>;"</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
      Change password<span style='color: #61ADA3; font-weight: bold;'>&lt;/</span><span style='color: #AA2C2C; font-weight: bold;'>span</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
  <span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>td</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
<span style='color: #61ADA3;'><span style='font-weight: bold;'>&lt;</span>/</span><span style='color: #AA2C2C; font-weight: bold;'>tr</span><span style='color: #61ADA3; font-weight: bold;'>&gt;</span>
</pre>
</li>
</ul>
